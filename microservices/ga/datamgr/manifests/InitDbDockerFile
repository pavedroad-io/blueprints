{{define "InitDbDockerFile"}}
# User golang based off al Alpine
FROM cockroachdb/cockroach

LABEL "io.pavedroad.vendor": "{{.Organization}}" \
      "io.pavedroad.init.db": "{{.Name}}db" \
      "io.pavedroad.description": "{{.ProjectInfo}}" \
      "io.pavedroad.version": "{{.Version}}" \
      "io.pavedroad.tempalte": "{{.TplName}}" \
      "io.pavedroad.definition": "{{.DefFile}}" \
      "io.pavedroad.env": "dev"

MAINTAINER "support@pavedroad.io"

# Build paths for placing kevlar microservice
ENV dbdir dev/db/
ENV cmd {{.Name}}ExecuteAll.sh
ENV pavedroad /pavedroad
ENV pavedroadbin $pavedroad/$cmd

# make working directory, move to it, and copy in prToken ms
RUN mkdir -p ${pavedroad}/logs
WORKDIR ${pavedroad}
COPY $dbdir* $pavedroad/

EXPOSE 8081
CMD ["/bin/sh", "-c", "$pavedroadbin"]
{{end}}
